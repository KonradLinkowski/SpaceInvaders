parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ZYE2":[function(require,module,exports) {
"use strict";function e(){var e=function(){},t=function(){};return{getInput:n,setActive:function(n,a){e=n,t=a,window.addEventListener("gamepadconnected",o,!1),window.addEventListener("gamepaddisconnected",i,!1)},setInactive:function(){window.removeEventListener("gamepadconnected",o,!1),window.removeEventListener("gamepaddisconnected",i,!1)}};function o(n){var t=n.gamepad;console.log("connected",t),e()}function i(e){var n=e.gamepad;console.log("disconnected",n),t()}}function n(){var e=navigator.getGamepads();if(e){var n=Object.values(e).find(function(e){return e});if(n)return{axes:{x:n.axes[0],y:n.axes[1]},fire:[0,5,7].map(function(e){return n.buttons[e]}).some(function(e){return e.pressed})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0,exports.init=e;
},{}],"MROY":[function(require,module,exports) {
"use strict";function e(e,r,t){return t>r?r:t<e?e:t}function r(e,r,t){return e+(r-e)*t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lerp=exports.clamp=void 0,exports.clamp=e,exports.lerp=r;
},{}],"tcHV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distance=exports.mulFactor=exports.subtract=exports.add=exports.dot=exports.lerp=exports.slerp=exports.magnitude=exports.normalize=void 0;var t=require("./math");function r(t){var r=e(t);return{x:r?t.x/r:0,y:r?t.y/r:0}}function e(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function o(e,o,x){x=(0,t.clamp)(0,1,x);var a=n(e,o),c=Math.acos(a)*x,i=r(p(o,u(e,a)));return r(s(u(e,Math.cos(c)),u(i,Math.sin(c))))}function x(r,e,o){return{x:(0,t.lerp)(r.x,e.x,o),y:(0,t.lerp)(r.y,e.y,o)}}function n(t,r){return t.x*r.x+t.y*r.y}function s(t,r){return{x:t.x+r.x,y:t.y+r.y}}function p(t,r){return{x:t.x-r.x,y:t.y-r.y}}function u(t,r){return{x:t.x*r,y:t.y*r}}function a(t,r){return e({x:t.x-r.x,y:t.y-r.y})}exports.normalize=r,exports.magnitude=e,exports.slerp=o,exports.lerp=x,exports.dot=n,exports.add=s,exports.subtract=p,exports.mulFactor=u,exports.distance=a;
},{"./math":"MROY"}],"I6xn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var e=require("../vector"),t={x:0,y:0},n=!1;function r(){var n=document.querySelector("#joystick"),r=document.querySelector("#handle"),d=document.querySelector("#mobile-plane"),a=document.querySelector("#button-fire");return{getInput:i,setActive:function(e){r.addEventListener("touchstart",c),r.addEventListener("touchend",u),d.addEventListener("touchmove",h),a.addEventListener("touchstart",v,!1),a.addEventListener("touchend",s,!1),a.removeEventListener("touchcancel",s,!1),d.hidden=!1,e()},setInactive:function(){r.removeEventListener("touchstart",c),r.removeEventListener("touchend",u),d.removeEventListener("touchmove",h),a.removeEventListener("touchstart",v),a.removeEventListener("touchend",s),a.removeEventListener("touchcancel",s),d.hidden=!0}};function h(i){if(i.preventDefault(),o){var c=i.touches[0],u=n.getBoundingClientRect(),v=c.pageX-(u.x+u.width/2),s=c.pageY-(u.y+u.height/2),d=(0,e.normalize)({x:v,y:s}),a=d.x,h=d.y;t={x:a,y:h},r.style.transform="translate("+75*a+"px, "+75*h+"px)"}}}exports.init=r;var o=!1;function i(){return{axes:t,fire:n}}function c(){o=!0}function u(){o=!1}function v(){n=!0}function s(){n=!1}
},{"../vector":"tcHV"}],"PMJo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var e=require("../vector"),t={x:0,y:0},n=!1;function i(){var i=document.querySelector("#canvas");return{getInput:o,setActive:function(e){i.addEventListener("mousedown",r),i.addEventListener("mouseup",u),i.addEventListener("mousemove",s),e()},setInactive:function(){i.removeEventListener("mousedown",r),i.removeEventListener("mouseup",u),i.removeEventListener("mousemove",s)}};function r(){n=!0}function u(){n=!1}function s(n){var o=n.clientX,r=n.clientY,u=i.getBoundingClientRect(),s=o-(u.x+u.width/2),v=r-(u.y+u.height/2),c=(0,e.normalize)({x:s,y:v});t=c}}function o(){return{axes:t,fire:n}}exports.init=i;
},{"../vector":"tcHV"}],"ftuY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=exports.InputSource=void 0;var e,t=require("./gamepad"),u=require("./mobile"),r=require("./mouse");!function(e){e.Gamepad="Gamepad",e.Mouse="Mouse",e.Mobile="Mobile"}(e=exports.InputSource||(exports.InputSource={}));var n=null,i=null;function o(o,p,a){var l=(0,t.init)(),I=(0,r.init)(),d=(0,u.init)();return f(o),{getInput:s,setInputSource:f,getInputSource:c};function f(t){n=t,i&&i.setInactive(),(i=function(t){switch(t){case e.Gamepad:return l;case e.Mobile:return d;case e.Mouse:return I}}(t)).setActive(p,a)}}function s(){return i.getInput()}function c(){return n}exports.init=o;
},{"./gamepad":"ZYE2","./mobile":"I6xn","./mouse":"PMJo"}],"FxBD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PLAYER_OFFSET=exports.PLAYER_SIZE=exports.WORLD_SIZE=exports.ENEMY_SIZE=exports.GAMEPAD_EPSILON=exports.PLAYER_SPEED=exports.PROJECTILE_SIZE=exports.PROJECTILE_SPEED=exports.FIRE_COOLDOWN=void 0,exports.FIRE_COOLDOWN=.1,exports.PROJECTILE_SPEED=1e3,exports.PROJECTILE_SIZE=5,exports.PLAYER_SPEED=10,exports.GAMEPAD_EPSILON=.3,exports.ENEMY_SIZE=10,exports.WORLD_SIZE=1e3,exports.PLAYER_SIZE=20,exports.PLAYER_OFFSET=50;
},{}],"AQSV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distance=exports.toPolarVector=exports.toVector=void 0;var t=require("./vector");function r(t){return{x:t.radius*Math.cos(t.angle),y:t.radius*Math.sin(t.angle)}}function e(r){return{radius:(0,t.magnitude)(r),angle:Math.atan2(r.y,r.x)}}function a(t,r){return Math.sqrt(Math.pow(t.radius,2)+Math.pow(r.radius,2)-2*t.radius*r.radius*Math.cos(t.angle-r.angle))}exports.toVector=r,exports.toPolarVector=e,exports.distance=a;
},{"./vector":"tcHV"}],"XLY6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toRelativeVector=void 0;var e=require("./config"),r=require("./polar-vector");function t(t){var o=(0,r.toVector)(t);return{x:o.x+e.WORLD_SIZE/2,y:o.y+e.WORLD_SIZE/2}}exports.toRelativeVector=t;
},{"./config":"FxBD","./polar-vector":"AQSV"}],"cUPp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var e=require("./config"),t=require("./world");function o(e){var t=e.getContext("2d");return t.globalCompositeOperation="source-atop",{draw:function(o){return i(e,t,o)}}}function i(o,i,r){var n,l=r.playerPosition,a=r.projectiles,c=r.enemies;function p(e,t,o,r){i.fillStyle=r,i.beginPath(),i.arc(e,t,o,0,2*Math.PI),i.closePath(),i.fill()}i.globalCompositeOperation="source-over",i.clearRect(0,0,o.width,o.height),p(o.width/2,o.height/2,5,"purple"),p(l.x+o.width/2,l.y+o.height/2,e.PLAYER_SIZE,"red"),function(){for(var o=0,i=a;o<i.length;o++){var r=i[o],n=(0,t.toRelativeVector)(r.position);p(n.x,n.y,e.PROJECTILE_SIZE,"blue")}}(),function(){for(var o=0,i=c;o<i.length;o++){var r=i[o],n=(0,t.toRelativeVector)(r.position);p(n.x,n.y,e.ENEMY_SIZE,"green")}}(),(n=i.createRadialGradient(e.WORLD_SIZE/2,e.WORLD_SIZE/2,.4*e.WORLD_SIZE,e.WORLD_SIZE/2,e.WORLD_SIZE/2,e.WORLD_SIZE/2)).addColorStop(0,"#ffff"),n.addColorStop(1,"#0000"),i.globalCompositeOperation="destination-in",i.fillStyle=n,i.fillRect(0,0,e.WORLD_SIZE,e.WORLD_SIZE)}exports.init=o;
},{"./config":"FxBD","./world":"XLY6"}],"vBK0":[function(require,module,exports) {
"use strict";var e;function n(e,n){var i=n||{angle:Math.random()*Math.PI*2,radius:400};return{age:0,initialPosition:i,position:i,type:e,speed:2*Math.random()-1}}function i(e){e.enemy.age+=e.deltaTime,e.enemy.position=a[e.enemy.type](e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.advanceEnemy=exports.createEnemy=exports.Type=void 0,function(e){e.Basic="Basic",e.Spinner="Spinner",e.ZigZag="ZigZag"}(e=exports.Type||(exports.Type={})),exports.createEnemy=n,exports.advanceEnemy=i;var a={Basic:function(e){var n=e.enemy,i=e.deltaTime;return{angle:n.position.angle,radius:n.position.radius-100*i}},Spinner:function(e){var n=e.enemy,i=e.deltaTime;return{angle:n.position.angle+n.speed*i*1,radius:n.position.radius-100*i}},ZigZag:function(e){var n=e.enemy,i=e.deltaTime;return{angle:n.initialPosition.angle+n.speed*Math.sin(n.age)*Math.PI,radius:n.position.radius-50*i}}};
},{}],"DVlx":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var r,i=1,t=arguments.length;i<t;i++)for(var a in r=arguments[i])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var r=require("./config"),i=require("./enemy"),t=require("./polar-vector"),a=require("./vector"),n={x:0,y:1},o={x:0,y:1},c=[],s=[(0,i.createEnemy)(i.Type.Basic),(0,i.createEnemy)(i.Type.ZigZag),(0,i.createEnemy)(i.Type.ZigZag),(0,i.createEnemy)(i.Type.ZigZag),(0,i.createEnemy)(i.Type.ZigZag),(0,i.createEnemy)(i.Type.ZigZag),(0,i.createEnemy)(i.Type.ZigZag),(0,i.createEnemy)(i.Type.ZigZag)],p=0;function E(){return{calculate:y}}function y(E){var y=E.input,u=E.deltaTime;(0,a.magnitude)(y.axes)>r.GAMEPAD_EPSILON&&(o=(0,a.normalize)(y.axes)),n=(0,a.slerp)(n,o,u*r.PLAYER_SPEED),p+=u,y.fire&&p>r.FIRE_COOLDOWN&&(p=0,c.push({position:e({},(0,t.toPolarVector)((0,a.mulFactor)(n,50)))}));for(var l=0,g=c;l<g.length;l++){(P=g[l]).position.radius+=u*r.PROJECTILE_SPEED}for(var m=0,v=s;m<v.length;m++){var Z=v[m];(0,i.advanceEnemy)({enemy:Z,deltaTime:u})}e:for(var f in c)for(var T in s){var P=c[f];Z=s[T];if((0,t.distance)(P.position,Z.position)<r.PROJECTILE_SIZE+r.ENEMY_SIZE){c.splice(+f,1),s.splice(+T,1);continue e}}return{playerPosition:(0,a.mulFactor)(n,r.PLAYER_OFFSET),projectiles:c,enemies:s}}exports.init=E;
},{"./config":"FxBD","./enemy":"vBK0","./polar-vector":"AQSV","./vector":"tcHV"}],"CnAr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;var e=require("./input");function t(t,n,r){var u=document.querySelector("#menu");window.addEventListener("keydown",function(e){"Escape"==e.key&&(u.hidden?c():i())}),document.querySelector("#start-button").addEventListener("click",function(){document.querySelector("html").requestFullscreen().catch(console.error),i()}),r(e.InputSource.Mouse);var o=document.querySelector("#input-source");function c(){u.hidden=!1,n()}function i(){u.hidden=!0,t()}o.addEventListener("change",function(){var t=o.querySelector("input:checked").value;r(e.InputSource[t])}),window.addEventListener("blur",c)}exports.init=t;
},{"./input":"ftuY"}],"LQOA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./input"),i=require("./render"),n=require("./physics"),t=require("./menu"),r=require("./config"),u=document.querySelector("#canvas");u.width=r.WORLD_SIZE,u.height=r.WORLD_SIZE;var o=!0,c=!0,a=(0,e.init)(e.InputSource.Mouse,function(){c=!1},function(){c=!0}),s=a.getInput,p=a.setInputSource;(0,t.init)(function(){o=!1},function(){o=!0},function(e){p(e)});var l=(0,n.init)().calculate,d=(0,i.init)(u).draw,f=0;function m(e){var i=(e-f)/1e3;if(f=e,window.requestAnimationFrame(m),!o&&!c){var n=s(),t=l({input:n,deltaTime:i}),r=t.playerPosition,u=t.projectiles,a=t.enemies;d({playerPosition:r,projectiles:u,enemies:a})}}window.requestAnimationFrame(m);
},{"./input":"ftuY","./render":"cUPp","./physics":"DVlx","./menu":"CnAr","./config":"FxBD"}]},{},["LQOA"], null)